-- tesr

local Players = game:GetService("Players")

local player = Players.LocalPlayer

local whitelist = {    

    "8_iloilx",
    "Zaianh14",
}

local function isWhitelisted(username)

    for _, allowed in ipairs(whitelist) do

        if string.lower(username) == string.lower(allowed) then

            return true

        end

    end

    return false

end

if not isWhitelisted(player.Name) then

    player:Kick("Fuck Off")

    return

end


local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer


local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 250, 0, 130)
MainFrame.Position = UDim2.new(0.3, 0, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BorderColor3 = Color3.fromRGB(255, 0, 0)
MainFrame.BorderSizePixel = 3
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui


local NameBox = Instance.new("TextBox")
NameBox.Size = UDim2.new(0.9, 0, 0, 30)
NameBox.Position = UDim2.new(0.05, 0, 0.1, 0)
NameBox.PlaceholderText = "اكتب اسم الاعب"
NameBox.Text = ""
NameBox.TextScaled = true
NameBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
NameBox.TextColor3 = Color3.fromRGB(255, 255, 255)
NameBox.BorderColor3 = Color3.fromRGB(255, 0, 0)
NameBox.Parent = MainFrame


local PullButton = Instance.new("TextButton")
PullButton.Size = UDim2.new(0.9, 0, 0, 30)
PullButton.Position = UDim2.new(0.05, 0, 0.45, 0)
PullButton.Text = "سحب"
PullButton.TextScaled = true
PullButton.BackgroundColor3 = Color3.fromRGB(120, 60, 20)
PullButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PullButton.BorderColor3 = Color3.fromRGB(255, 0, 0)
PullButton.Parent = MainFrame


local ToggleButton = Instance.new("ImageButton")
ToggleButton.Size = UDim2.new(0, 50, 0, 50)
ToggleButton.Position = UDim2.new(0, 10, 0.8, 0)
ToggleButton.BackgroundColor3 = Color3.fromRGB(120, 60, 20)
ToggleButton.Image = "rbxassetid://6675147490"
ToggleButton.BorderColor3 = Color3.fromRGB(255, 0, 0)
ToggleButton.Parent = ScreenGui
ToggleButton.Active = true
ToggleButton.Draggable = true


local guiVisible = true
local function toggleGui()
	guiVisible = not guiVisible
	MainFrame.Visible = guiVisible
end

UIS.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == Enum.KeyCode.Z then
		toggleGui()
	end
end)

ToggleButton.MouseButton1Click:Connect(toggleGui)


local function findPlayer(query)
	query = string.lower(query)
	for _, plr in pairs(Players:GetPlayers()) do
		if string.find(string.lower(plr.Name), query) or string.find(string.lower(plr.DisplayName), query) then
			return plr
		end
	end
	return nil
end


local function equipNormalTool()
	local backpack = LocalPlayer:FindFirstChild("Backpack")
	if backpack then
		local tool = backpack:FindFirstChild("Normal")
		if tool then
			tool.Parent = LocalPlayer.Character
			task.wait(0.2)
			return true
		end
	end
	return false
end


PullButton.MouseButton1Click:Connect(function()
	local target = findPlayer(NameBox.Text)
	if target and target.Character then
		if equipNormalTool() then
			local args = {
				LocalPlayer.Backpack:FindFirstChild("Normal") or LocalPlayer.Character:FindFirstChild("Normal"),
				target.Character
			}
			ReplicatedStorage:WaitForChild("Framework"):WaitForChild("Network"):WaitForChild("HandcuffRemote"):InvokeServer(unpack(args))
		end
	end
end)
